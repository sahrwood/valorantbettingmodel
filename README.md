# valorantbettingmodel
Valorant Betting Models

This project started back in 2022, where I was working at a sportsbook with myriad offerings that had a non-betting clause for every sport it offered. I had been playing Valorant for a bit at this point with my friends, and being into the esports scene I came up with the idea of creating a betting model.

At first, not much went through my head besides the idea of scraping a bunch of valorant statistics, and throwing them into a soup with linear regression in excel. The scraping entails using vlr.gg, a site that has access to the Riot Games API (Valorant Developer) for competitive esports match statistics. The code is within the repository, where I use selenium and beautifulsoup to extract text from website elements, and pandas to organize this scraped data and save match stats/economy data to .csvs. 

The efficieincy of this process could probably be improved upon, but it works well. I import the .csvs to excel, and mass clean inevitable web scraping data errors with power query. Various formulas are used to aggregate statistics by team for each match.


Methodology 

To predict win probability for teams in valorant, I am using round differential (essentially margin of victory) as my dependent variable, and various match statistics as predictors. I make a round differential prediction for a potential best of one series between 2 teams, and then use the binomial distibution to adjust this percentage if the series is longer at 3 or 5 games. I then compare my win probability prediction to decimal betting odds, which I then compare to betting odds on thunderpick.gg. Stake is determined with kelly staking, which calculates the optimal bet size by subtracting the fraction of your capital that you would lose if you lost the bet from the fraction you would gain if you won, adjusted for the odds and probability of winning.

With many statistics to choose from, I tried to be as calculated as possible when initially narrowing them down. I first looked at statistics that had at least a 55% correlation to positive round differential (winning a game) which eliminated lots of metrics. Feeding a large quantity of variables into excel regression allowed me to see additional variables that made very marginal impacts, as well as variables with p values above 0.05 (not statistically significant). Some of the strongest predictors were statistics related to round win rate in different contexts (win rates when attacking, defending, win rates with different levels of economy relative to opponent). While standard error decreased with all of these win rates fed into the model, it seemed abundantly clear that there would be a high level of multicollinearity between these variables. I decided to go with economic win rates over attack/defense win rates as inputs into the model. There are various reasons for this, but a primary one was that attack/defense win rates had almost identical impacts on round differential, and having simply win rate as an input in the model without much other context didn't make as much sense to me as having win rates with an economic context.

I have thousands of matches worth of information scraped from past valorant matches dating back to March 2023. With various evaluation metrics such as Multiple R, R Square, Adjusted R Square, and Standard error all improving in my basic excel linear regression model while using this data vs recent match data, it seems logical to use all this historical data for training the models. For making predictions in the present, I am careful to use data from only the more recent patches, as character strength and maps in the competitive rotation change over time, which benefits some teams and hurts others based on the strengths of the players. Additional, If a team makes a change to their roster I wouldn't make a prediction involving said team until they reach a reasonably large sample size with their new iteration (I've defined this at 100 rounds).

